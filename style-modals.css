/* Griglia per affiancare i pulsanti (50% e 50%) */
.trail-actions-grid {
    display: grid;
    grid-template-columns: 1fr 1fr; 
    gap: 12px;
    padding: 15px;
    background: #ffffff;
    border-top: 1px solid #f9f9f9;
}

/* Stile Base Pulsante */
.btn-trail-modern {
    width: 100%;
    padding: 12px 0; 
    border-radius: 12px;
    border: none;
    font-family: 'Roboto', sans-serif;
    font-size: 0.9rem;
    font-weight: 700;
    display: flex; align-items: center; justify-content: center; gap: 6px;
    cursor: pointer; transition: all 0.2s;
}
.btn-trail-modern:active { transform: scale(0.96); }

/* Varianti Colore */
.btn-trail-tech { background-color: #2A9D8F; color: white; box-shadow: 0 4px 10px rgba(42, 157, 143, 0.3); }
.btn-trail-info { background-color: #F0F2F5; color: #555; border: 1px solid #eee; }

/* ============================================================
   3. MODALE STRUTTURALE (Layout Flex Perfetto)
   ============================================================ */
.tech-container {
    width: 100%; max-width: 500px;
    height: 85vh; max-height: 800px;
    background: white; border-radius: 20px; overflow: hidden; /* Nascondiamo overflow generale */
    
    /* Layout Verticale Rigido */
    display: flex; 
    flex-direction: column;
    
    box-shadow: 0 20px 50px rgba(0,0,0,0.4);
    position: relative;
}

/* NUOVO: Questo contenitore avvolge Mappa e Grafico e gestisce lo scroll */
/* Occupa tutto lo spazio tranne quello dei pulsanti */
.tech-scroll-wrapper {
    flex-grow: 1; /* Si espande */
    overflow-y: auto; /* Abilita lo scroll QUI dentro */
    overflow-x: hidden;
    position: relative;
    padding-bottom: 20px; /* Spazio extra in fondo allo scroll */
}

/* Mappa */
#tech-map-canvas {
    width: 100%; 
    min-height: 350px; /* Altezza minima garantita */
    background: #e0e0e0; display: block;
    /* La mappa non deve flex-grow qui, ha la sua altezza */
}

/* Grafico Altimetrico */
#elevation-div {
    background: #fff; border-bottom: 1px solid #eee;
    width: 100%; height: 160px !important;
    display: none; flex-shrink: 0;
    
    /* Nessun margine strano, ci pensa il wrapper */
    margin: 0 !important; 
}

/* ============================================================
   4. DATI TECNICI (Griglia)
   ============================================================ */
.tech-data-row {
    padding: 20px 15px 15px 15px;
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;
    text-align: center; background: #fff; border-bottom: 1px solid #eee;
    flex-shrink: 0;
}
.tech-data-group {
    background: #ffffff; border-radius: 12px; border: 1px solid #e0e0e0;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    padding: 8px 0; box-shadow: 0 2px 5px rgba(0,0,0,0.03);
}
.tech-data-item { width: 100%; padding: 2px 0; display:flex; flex-direction:column; align-items:center; }
.tech-divider { width: 50%; height: 1px; background: #eee; margin: 4px 0; }

.t-val { font-size: 1.1rem; font-weight: 800; color: #2D3436; line-height: 1; display: inline-flex; align-items: baseline; gap: 2px; }
.t-unit { font-size: 0.75rem; font-weight: 600; color: #7f8c8d; }
.t-lbl { font-size: 0.65rem; text-transform: uppercase; color: #999; font-weight: 700; margin-top: 2px; }

/* ============================================================
   5. GRIGLIA PULSANTI (Fissa in basso)
   ============================================================ */
.modal-actions-grid {
    display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px;
    padding: 15px; background: white; border-top: 1px solid #eee;
    
    /* FONDAMENTALE: Non si schiaccia e sta sempre in vista */
    flex-shrink: 0; 
    z-index: 10;
    padding-bottom: 25px; /* Spazio per gesture bar */
    box-shadow: 0 -4px 10px rgba(0,0,0,0.05); /* Ombra per staccare visivamente */
}

/* Stili pulsanti */
.btn-trail-gps { background-color: #29B6F6; color: white; border: none; box-shadow: 0 4px 10px rgba(41, 182, 246, 0.3); }
.modal-actions-grid .btn-trail-modern { padding: 12px 2px; font-size: 0.8rem; }

/* Reset Plugin */
.elevation-control.leaflet-control { background: transparent !important; margin: 0 !important; padding: 0 !important; width: 100% !important; box-shadow: none !important; }
.leaflet-control-download, .elevation-control-download, .elevation-control .download, .elevation-control a { display: none !important; }
